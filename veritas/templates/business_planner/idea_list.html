{% extends 'base.html' %}

{% block title %}All Business Plans - Project Veritas{% endblock %}

{% block content %}
<h1 style="color: #2c3e50; margin-bottom: 2rem; text-align: center;">All Business Plans</h1>

{% if business_ideas %}
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 1.5rem;">
    {% for idea in business_ideas %}
    <div class="card" style="border-left: 4px solid #3498db;">
        <h2 style="color: #2c3e50; margin-bottom: 0.5rem;">{{ idea.business_name }}</h2>
        <p style="color: #7f8c8d; margin-bottom: 0.5rem;"><strong>Industry:</strong> {{ idea.industry }}</p>
        <p style="color: #7f8c8d; margin-bottom: 0.5rem;"><strong>Target Market:</strong> {{ idea.target_market }}</p>
        <p style="margin-bottom: 1rem; color: #555;">{{ idea.business_description|truncatewords:25 }}</p>
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="color: #7f8c8d; font-size: 0.9rem;">Created: {{ idea.created_at|date:"M d, Y" }}</span>
            <a href="{% url 'business_plan_detail' idea.pk %}" class="btn btn-primary">View Plan</a>
        </div>
    </div>
    {% endfor %}
</div>

{% if is_paginated %}
<div style="text-align: center; margin-top: 2rem;">
    <div style="display: inline-flex; gap: 0.5rem;">
        {% if page_obj.has_previous %}
            <a href="?page=1" class="btn">First</a>
            <a href="?page={{ page_obj.previous_page_number }}" class="btn">Previous</a>
        {% endif %}
        
        <span style="padding: 0.75rem 1rem; background-color: #ecf0f1; border-radius: 4px;">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
        </span>
        
        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}" class="btn">Next</a>
            <a href="?page={{ page_obj.paginator.num_pages }}" class="btn">Last</a>
        {% endif %}
    </div>
</div>
{% endif %}

{% else %}
<div class="card" style="text-align: center;">
    <p style="font-size: 1.2rem; color: #7f8c8d; margin-bottom: 1.5rem;">No business plans yet. Be the first to create one!</p>
    <a href="{% url 'create_business_idea' %}" class="btn btn-success">Create Your First Plan</a>
</div>
{% endif %}
{% endblock %}
